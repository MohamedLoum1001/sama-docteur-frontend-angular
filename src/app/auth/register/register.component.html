<div class="container mt-2">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="text-center mb-4">
        <h3 class="mt-2 fw-bold text-primary">Inscription</h3>
      </div>
      <div class="card shadow-lg p-4 border-0 rounded-4">
        <form [formGroup]="registerForm" (ngSubmit)="submit()">

          <!-- Prénom et Nom -->
          <div class="row">
            <div class="mb-1 col-md-6">
              <label class="form-label">Prénom</label>
              <div class="input-group">
                <span class="input-group-text bg-white border-start-0 rounded-start-pill">
                  <i class="fa fa-user"></i>
                </span>
                <input type="text" class="form-control border-start-0 rounded-end-pill px-2 py-2"
                  formControlName="prenom" placeholder="Entrez votre prénom" required />
              </div>
              <div
                *ngIf="registerForm.get('prenom')?.invalid && (registerForm.get('prenom')?.touched || registerForm.get('prenom')?.dirty)"
                class="text-danger">
                Le prénom est requis.
              </div>
            </div>
            <div class="mb-1 col-md-6">
              <label class="form-label">Nom</label>
              <div class="input-group">
                <span class="input-group-text bg-white border-start-0 rounded-start-pill">
                  <i class="fa fa-user"></i>
                </span>
                <input type="text" class="form-control border-start-0 rounded-end-pill px-2 py-2" formControlName="nom"
                  placeholder="Entrez votre nom" required />
              </div>
              <div
                *ngIf="registerForm.get('nom')?.invalid && (registerForm.get('nom')?.touched || registerForm.get('nom')?.dirty)"
                class="text-danger">
                Le nom est requis.
              </div>
            </div>
          </div>

          <!-- Email et Adresse -->
          <div class="row">
            <div class="mb-1 col-md-6">
              <label class="form-label">Email</label>
              <div class="input-group">
                <span class="input-group-text bg-white border-start-0 rounded-start-pill">
                  <i class="fa fa-envelope"></i>
                </span>
                <input type="email" class="form-control border-start-0 rounded-end-pill px-2 py-2"
                  formControlName="email" placeholder="Entrez votre email" required />
              </div>
              <div
                *ngIf="registerForm.get('email')?.invalid && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty)"
                class="text-danger">
                Email invalide ou requis.
              </div>
            </div>
            <div class="mb-1 col-md-6">
              <label class="form-label">Adresse</label>
              <div class="input-group">
                <span class="input-group-text bg-white border-start-0 rounded-start-pill">
                  <i class="fa fa-map-marker-alt"></i>
                </span>
                <input type="text" class="form-control border-start-0 rounded-end-pill px-2 py-2"
                  formControlName="adresse" placeholder="Entrez votre adresse" required />
              </div>
              <div
                *ngIf="registerForm.get('adresse')?.invalid && (registerForm.get('adresse')?.touched || registerForm.get('adresse')?.dirty)"
                class="text-danger">
                L'adresse est requise.
              </div>
            </div>
          </div>

          <!-- Téléphone et Rôle -->
          <div class="row">
            <div class="mb-1 col-md-6">
              <label class="form-label">Téléphone</label>
              <div class="input-group">
                <span class="input-group-text bg-white border-start-0 rounded-start-pill">
                  <i class="fa fa-phone"></i>
                </span>
                <input type="text" class="form-control border-start-0 rounded-end-pill px-2 py-2"
                  formControlName="telephone" placeholder="Entrez votre téléphone" required />
              </div>
              <div
                *ngIf="registerForm.get('telephone')?.invalid && (registerForm.get('telephone')?.touched || registerForm.get('telephone')?.dirty)"
                class="text-danger">
                Le téléphone est requis.
              </div>
            </div>
            <div class="mb-1 col-md-6">
              <label class="form-label">Rôle</label>
              <div class="input-group">
                <span class="input-group-text bg-white border-start-0 rounded-start-pill">
                  <i class="fa fa-id-badge"></i>
                </span>
                <select class="form-select border-start-0 rounded-end-pill px-2 py-2" formControlName="role" required>
                  <option value="">Sélectionnez un rôle</option>
                  <option value="PATIENT">PATIENT</option>
                  <option value="ADMIN">ADMIN</option>
                  <option value="MEDECIN">MEDECIN</option>
                </select>
              </div>
              <div
                *ngIf="registerForm.get('role')?.invalid && (registerForm.get('role')?.touched || registerForm.get('role')?.dirty)"
                class="text-danger">
                Le rôle est requis.
              </div>
            </div>
          </div>

          <!-- Spécialité (visible uniquement si rôle = MEDECIN) -->
          <div *ngIf="isMedecin" class="mb-3">
            <label for="specialite" class="form-label">Spécialité</label>
            <input id="specialite" type="text" class="form-control" formControlName="specialite" placeholder="Ex : Cardiologue, Pédiatre..." />
            <div *ngIf="registerForm.get('specialite')?.invalid && (registerForm.get('specialite')?.touched || registerForm.get('specialite')?.dirty)" class="text-danger">
              La spécialité est requise.
            </div>
          </div>

          <!-- Password et Confirm Password -->
          <div class="row">
            <div class="mb-1 col-md-6">
              <label class="form-label">Mot de passe</label>
              <div class="input-group">
                <span class="input-group-text bg-white border-end-0 rounded-start-pill">
                  <i class="fa fa-lock"></i>
                </span>
                <input [type]="showPassword ? 'text' : 'password'" class="form-control border-end-0 px-3 py-2"
                  formControlName="password" placeholder="Mot de passe" required />
                <span class="input-group-text bg-white border-start-0 rounded-end-pill" style="cursor: pointer"
                  (click)="togglePasswordVisibility()">
                  <i class="fa" [ngClass]="showPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
                </span>
              </div>
              <div
                *ngIf="registerForm.get('password')?.invalid && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty)"
                class="text-danger">
                Le mot de passe est requis (6 caractères minimum).
              </div>
            </div>
            <div class="mb-3 col-md-6">
              <label class="form-label">Confirmer le mot de passe</label>
              <div class="input-group">
                <span class="input-group-text bg-white border-end-0 rounded-start-pill">
                  <i class="fa fa-lock"></i>
                </span>
                <input [type]="showPassword ? 'text' : 'password'" class="form-control border-end-0 px-3 py-2"
                  formControlName="confirmPassword" placeholder="Confirmer le mot de passe" required />
                <span class="input-group-text bg-white border-start-0 rounded-end-pill" style="cursor: pointer"
                  (click)="togglePasswordVisibility()">
                  <i class="fa" [ngClass]="showPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
                </span>
              </div>

              <div
                *ngIf="registerForm.get('confirmPassword')?.errors?.['required'] && (registerForm.get('confirmPassword')?.touched || registerForm.get('confirmPassword')?.dirty)"
                class="text-danger mt-1">
                La confirmation du mot de passe est requise.
              </div>

              <div
                *ngIf="registerForm.errors?.['passwordsMismatch'] && (registerForm.get('confirmPassword')?.touched || registerForm.get('confirmPassword')?.dirty)"
                class="text-danger mt-1">
                Les mots de passe ne correspondent pas.
              </div>
            </div>
          </div>

          <button type="submit" class="btn w-100 mb-3 rounded-pill text-white" style="background-color: #00a5a8;">
            S'inscrire
          </button>

          <button type="button" (click)="loginData()" class="btn w-100 rounded-pill text-white" style="background-color: #0b89c4">
            Se connecter
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
